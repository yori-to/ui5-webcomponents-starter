import ViewRenderer from './ViewRenderer.js';
var HTMLViewRenderer = {};
HTMLViewRenderer.render = function (oRenderManager, oControl) {
    var rm = oRenderManager;
    rm.write('<div');
    rm.writeControlData(oControl);
    rm.addClass('sapUiView');
    rm.addClass('sapUiHTMLView');
    ViewRenderer.addDisplayClass(rm, oControl);
    if (oControl.getWidth()) {
        rm.addStyle('width', oControl.getWidth());
    }
    if (oControl.getHeight()) {
        rm.addStyle('height', oControl.getHeight());
    }
    rm.writeStyles();
    rm.writeClasses();
    rm.write('>');
    if (oControl._oTemplate) {
        var sHTML = oControl._oTemplate.innerHTML;
        var content = oControl.getContent();
        var aDeferred = [];
        var renderControl = function (oControl) {
            var sTemp = HTMLViewRenderer._getHTML(rm, oControl, sHTML);
            if (sTemp) {
                sHTML = sTemp;
            } else {
                aDeferred.push(oControl);
            }
        };
        if (content) {
            if (Array.isArray(content)) {
                for (var i = 0; i < content.length; i++) {
                    renderControl(content[i]);
                }
            } else if (content) {
                renderControl(content);
            }
        }
        rm.write(sHTML);
        for (var i = 0; i < aDeferred.length; i++) {
            rm.renderControl(aDeferred[i]);
        }
    }
    rm.write('</div>');
};
HTMLViewRenderer._getHTML = function (oRenderManager, oControl, sHTML) {
    var sId = oControl.getId();
    sHTML = sHTML.replace(/(<div)/gi, '\n$1');
    var regExp = new RegExp('<div.*?data-sap-ui-id="' + sId + '".*?></div>', 'gi');
    var aMatches = regExp.exec(sHTML);
    if (aMatches) {
        sHTML = sHTML.replace(aMatches[0], oRenderManager.getHTML(oControl));
        return sHTML;
    } else {
        return '';
    }
};
export default HTMLViewRenderer;